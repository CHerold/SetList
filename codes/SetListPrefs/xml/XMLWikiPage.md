====== SetList Preferences ======

===== Adding a Preference =====
FIXME

**Rough outline**:
  - Add new preference data to FILENAME.ctl as a new sub-cluster.  Name the cluster something descriptive in [[wp>CamelCase]].
  - Add a short description in the "Description and tooltip" right-click menu
  - Set the defaults for the preference in Preference.lvclass's private data using the using "Use current values as default" methodology.
  - Add read accessor?  Or, do we want to only allow the accessor to the whole prefcluster, and unbundle from that? Anyways, you need some way to get at the stored preference value, so there's that.
  - Oh goodness, I haven't even though about wether prefs will be a dialog box or another tab or what, but you'll need to put that in here.  If dialog probably another "DisplayInfo" style thing, otherwise some tab with stuff everywhere on it or something.  Or even combine the two and run a "DisplayInfo" thing as a subpanel inside a tab.

===== Removing a Preference =====
FIXME

** Rough outline **
  - Copy the preference name into a new entry of the ?"OldPrefs"? string array in Preference.lvclass's private data.
  - Delete corresponding accessor from Preference.lvclass, if it exists.
  - Clean whatever configuration interface exists off of wherever we decide to put such things.
  - Delete the corresponding cluster from FILENAME.ctl
  - That's it, you're done! (As long as you've already removed places it was used previously)

===== XML Preferences Format =====
The Preference class handles reading and writing the XML file for you, so you should never need to edit it manually.  Nevertheless, an effort has been made to make it human-readable.  On load the file is checked against a schema to ensure it is properly formatted, and an error will be reported if it is not.

The XML schema used to validate the preference file is included with SetList, but for completeness we'll outline the structure of the file.

The root-level tag is ''%%<SetListPrefs>%%'', and it has several attributes to setup how the XML Parser will interact with it.  For the actual preferences it contains elements (in order):
  * ''%%<DocLoc>%%'':  Locations of documentation for the file format
    * ''%%<WikiURL>%%'':  A link to this page, the location of format definition on the wiki
    * ''%%<LocalCopy>%%'':  A link to a local markdown file containing the same documentation
  * ''%%<ActivePrefSet>%%'':  The ''%%<Name>%%'' of the currently active PrefSet.  Right now this is unused
  * One or more of ''%%<PrefSet>%%'':  The actual stored preferences.
    * ''%%<Name>%%'':  The name of this preference set. Should be in [[wp>CamelCase]]. (this is what is referenced by ''%%<ActivePrefSet>%%'')
    * Zero or more of ''%%<PrefItem>%%'':  Individual elements of the Preferences cluster in LabView
      * ''%%<Name>%%'':  The name of this item, pulled from LabView's label.  Should be in [[wp>CamelCase]].
      * ''%%<Description>%%'':  The description of this item, pulled from LabView's description.
      * ''%%<ModTimestamp>%%'':  The last time this particular item was saved to file.  Given as in [[wp>ISO_8601#Combined_date_and_time_representations|ISO-8601]] form.
      * ''%%<PrefKnown>%%'': One of:
        * ''%%Current%%'' meaning this was a preference item in-use at time of saving
        * ''%%Old%%'' meaning this item is not is use, but a known former preference item
        * ''%%Unknown%%'' meaning this item is neither in use nor a known old item
      * ''%%<LVData>%%'' contains the XML form of the preference item's value generated by LabView

==== Example Preferences file ====
For reference, here is a properly formatted preferences file.  The preferences don't correspond to any actual functionality in SetList.

<code xml exampleSetListPrefs.xml>
<?xml version="1.0"?>
<SetListPrefs
xmlns:jqisetlist="https://jqi-wiki.physics.umd.edu/d/documentation/software/computercontrol/setlist/home"
xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
xsi:schemaLocation="https://jqi-wiki.physics.umd.edu/d/documentation/software/computercontrol/setlist/home setListPrefs.xsd"
xmlns="https://jqi-wiki.physics.umd.edu/d/documentation/software/computercontrol/setlist/home">
<DocLoc>
	<WikiURL>https://jqi-wiki.physics.umd.edu/d/documentation/software/computercontrol/setlist/preferences</WikiURL>
	<LocalCopy>code/Preferences/xml/PrefXMLFormat.md</LocalCopy>
</DocLoc>
<ActivePrefSet>Default</ActivePrefSet>
<PrefSet>
	<Name>Default</Name>
	<PrefItem>
		<Name>MakeBlue</Name>
		<Description>Test Description</Description>
		<ModTimestamp>2014-09-26T19:52:32-04:00</ModTimestamp>
		<PrefKnown>Old</PrefKnown>
		<LVData>
			<LvVariant>
			<Name>Value</Name>
			<Boolean>
			<Name>MakePink</Name>
			<Val>0</Val>
			</Boolean>
			</LvVariant>
		</LVData>
	</PrefItem>
	<PrefItem>
		<Name>SetWindowPosition</Name>
		<Description></Description>
		<ModTimestamp>2014-09-26T19:52:32-04:00</ModTimestamp>
		<PrefKnown>Current</PrefKnown>
		<LVData>
			<LvVariant>
			<Name>Value</Name>
			<Boolean>
			<Name>SetWindowPosition</Name>
			<Val>1</Val>
			</Boolean>
			</LvVariant>
		</LVData>
	</PrefItem>
</PrefSet>
</SetListPrefs>
</code>